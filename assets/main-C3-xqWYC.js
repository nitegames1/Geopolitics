import{r as s,j as e,c as z,R as K}from"./client-BUXaLVZy.js";function U(){const[D,x]=s.useState("menu"),[o,E]=s.useState(100),[h,b]=s.useState(o),[p,j]=s.useState(0),[n,v]=s.useState([o]),[y,N]=s.useState([]),[f,$]=s.useState("normal"),[u,I]=s.useState(!0),[k,d]=s.useState(!1),[P,m]=s.useState(!1),[S,F]=s.useState(!1),r={easy:{eventChance:.2,eventMagnitude:5,policyImpact:10},normal:{eventChance:.3,eventMagnitude:10,policyImpact:5},hard:{eventChance:.5,eventMagnitude:15,policyImpact:3}}[f];s.useEffect(()=>{document.body.classList.toggle("light",!u)},[u]);const H=t=>{if(Math.random()<r.eventChance){const a=Math.random()>.5,c=S?r.eventMagnitude*2.5:r.eventMagnitude,l=a?c:-c,g=a?"Technological breakthrough boosts industry":"Natural disaster disrupts production";return N(L=>[...L,{text:`Turn ${t}: ${g} (${l>0?"+":""}${l})`,amount:l}]),l}return 0},C=t=>{const a=p+1,c=H(a),l=Math.max(0,h+t+c);b(l),j(a),v(g=>[...g,l])},R=()=>C(r.policyImpact),T=()=>C(-r.policyImpact),M=()=>{j(0),b(o),v([o]),N([])},w=Math.max(...n),B=n.length>1?n[n.length-2]:n[0],i=h-B,A=n.length>1?n.map((t,a)=>{const c=a/(n.length-1)*100,l=100-t/w*100;return`${c},${l}`}).join(" "):`0,${100-n[0]/w*100}`,G=(k||P)&&e.jsx("div",{className:"modal-overlay",children:e.jsx("div",{className:"modal text-left",children:k?e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-xl font-bold mb-2",children:"How to Play"}),e.jsx("p",{className:"mb-2",children:"Adjust spending each turn and watch GDP respond. Random events may boost or hurt your economy based on your settings."}),e.jsx("p",{className:"mb-4",children:"Keep GDP above zero to keep the simulation going. Use the Settings menu to set the starting GDP, pick a difficulty level, toggle Fun Mode, or switch between dark and light themes."}),e.jsx("button",{className:"btn bg-blue-700 hover:bg-blue-600",onClick:()=>d(!1),children:"Close"})]}):e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-xl font-bold mb-2",children:"Settings"}),e.jsxs("label",{className:"block mb-2",children:["Starting GDP:",e.jsx("input",{type:"number",className:"ml-2 w-24 p-1 text-right",value:o,min:0,onChange:t=>E(Math.max(0,Number(t.target.value)))})]}),e.jsxs("label",{className:"block mb-2",children:["Difficulty:",e.jsxs("select",{className:"ml-2 p-1",value:f,onChange:t=>$(t.target.value),children:[e.jsx("option",{value:"easy",children:"Easy"}),e.jsx("option",{value:"normal",children:"Normal"}),e.jsx("option",{value:"hard",children:"Hard"})]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"checkbox",className:"mr-2",checked:S,onChange:t=>F(t.target.checked)}),"Enable Fun Mode (wild events)"]})}),e.jsx("div",{className:"mt-2",children:e.jsxs("label",{className:"inline-flex items-center",children:[e.jsx("input",{type:"checkbox",className:"mr-2",checked:u,onChange:t=>I(t.target.checked)}),"Dark Mode"]})}),e.jsx("button",{className:"btn bg-blue-700 hover:bg-blue-600 mt-4",onClick:()=>m(!1),children:"Close"})]})})});return D==="sim"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"sim-container",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Mini Economy Simulation"}),e.jsxs("div",{className:"panel text-center",children:[e.jsxs("p",{className:`mb-3 ${i>0?"text-green-400":i<0?"text-red-400":""}`,children:["Turn ",p," | GDP: ",h,"B ",i!==0&&`(${i>0?"+":""}${i})`]}),e.jsx("svg",{viewBox:"0 0 100 100",className:"gdp-chart mb-3",children:e.jsx("polyline",{points:A,fill:"none",stroke:"#4ade80",strokeWidth:"2"})}),e.jsx("button",{className:"btn bg-blue-700 hover:bg-blue-600 mr-2",onClick:R,children:"Invest in Infrastructure"}),e.jsx("button",{className:"btn bg-red-700 hover:bg-red-600 mr-2",onClick:T,children:"Cut Spending"})]}),e.jsxs("div",{className:"panel mt-4",children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Event Log"}),y.length>0?e.jsx("ul",{className:"event-log text-left space-y-1",children:y.map((t,a)=>e.jsx("li",{className:t.amount>0?"text-green-400":"text-red-400",children:t.text},a))}):e.jsx("p",{children:"No events yet."})]}),e.jsxs("div",{className:"mt-4 flex justify-between",children:[e.jsx("button",{className:"btn bg-gray-700 hover:bg-gray-600",onClick:()=>x("menu"),children:"Back to Menu"}),e.jsx("button",{className:"btn bg-gray-700 hover:bg-gray-600",onClick:()=>{m(!0),d(!1)},children:"Settings"}),e.jsx("button",{className:"btn bg-yellow-700 hover:bg-yellow-600",onClick:M,children:"Reset"})]})]}),G]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"sim-container text-center",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Geopolitics Prototype"}),e.jsx("p",{className:"text-gray-300 mb-6",children:"Manage a country's economy and watch the effects of your decisions."}),e.jsx("button",{className:"btn bg-green-700 hover:bg-green-600 mr-2",onClick:()=>{M(),x("sim")},children:"Start Simulation"}),e.jsx("button",{className:"btn bg-gray-700 hover:bg-gray-600 mt-4",onClick:()=>{m(!0),d(!1)},children:"Settings"}),e.jsx("button",{className:"btn bg-blue-700 hover:bg-blue-600 mt-4",onClick:()=>{d(!0),m(!1)},children:"How to Play"})]}),G]})}z.createRoot(document.getElementById("root")).render(e.jsx(K.StrictMode,{children:e.jsx(U,{})}));
